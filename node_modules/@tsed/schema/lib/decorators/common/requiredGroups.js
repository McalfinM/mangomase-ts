"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequiredGroups = void 0;
const core_1 = require("@tsed/core");
const matchGroups_1 = require("../../utils/matchGroups");
const jsonEntityFn_1 = require("./jsonEntityFn");
/**
 * Apply groups validation strategy for required property.
 *
 * @decorator
 * @validation
 * @swagger
 * @schema
 * @input
 */
function RequiredGroups(...groups) {
    return jsonEntityFn_1.JsonEntityFn((entity) => {
        if (entity.decoratorType === core_1.DecoratorTypes.PROP) {
            entity.parent.schema.$hooks.on("requiredGroups", (required, givenGroups) => {
                if (matchGroups_1.matchGroups(groups, givenGroups)) {
                    return required.filter((key) => key !== entity.propertyKey);
                }
                return required;
            });
        }
    });
}
exports.RequiredGroups = RequiredGroups;
//# sourceMappingURL=requiredGroups.js.map