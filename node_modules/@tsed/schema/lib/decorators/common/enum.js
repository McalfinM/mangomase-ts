"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Enum = void 0;
const core_1 = require("@tsed/core");
const jsonEntityFn_1 = require("./jsonEntityFn");
const transformTsEnum = (enumValue) => {
    return Object.keys(enumValue).reduce((acc, key) => {
        if (isNaN(+key)) {
            const value = enumValue[key];
            return acc.concat(value);
        }
        return acc;
    }, []);
};
function Enum(enumValue, ...enumValues) {
    return jsonEntityFn_1.JsonEntityFn((store) => {
        const values = [enumValue].concat(enumValues).reduce((acc, value) => {
            if (core_1.isObject(value) && value !== null) {
                value = transformTsEnum(value);
            }
            return acc.concat(value);
        }, []);
        const types = values.reduce((set, value) => {
            return set.add(value === null ? "null" : typeof value);
        }, new Set());
        store.itemSchema.enum(values).any(...types);
    });
}
exports.Enum = Enum;
//# sourceMappingURL=enum.js.map